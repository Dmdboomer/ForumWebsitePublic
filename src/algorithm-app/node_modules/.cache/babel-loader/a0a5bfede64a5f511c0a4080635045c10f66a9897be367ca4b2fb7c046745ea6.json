{"ast":null,"code":"var _jsxFileName = \"/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/CodeRoot/pages/RootsPage.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport DashboardComponent from '../../CodeDashboard/components/DashboardComponent';\nimport useDashboardHover from '../../CodeDashboard/hooks/UseDashboardHover';\nimport SearchBar from '../../CodeHome/SearchBar';\nimport RootsHeader from './components/RootsHeader';\nimport RootsControls from './components/RootsControls';\nimport RootsGrid from './components/RootsGrid';\nimport CreateRootModal from './components/CreateRootModal';\nimport LoadingState from './components/LoadingState';\nimport '../../CodeCSS/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RootsPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [roots, setRoots] = React.useState([]);\n  const [loading, setLoading] = React.useState(true);\n  const [showCreateForm, setShowCreateForm] = React.useState(false);\n  const [sortOption, setSortOption] = React.useState('latest');\n  const [searchParams, setSearchParams] = React.useState({});\n  const {\n    dashboardOpen,\n    handleHoverEnter,\n    handleHoverLeave,\n    handleDashboardEnter,\n    handleDashboardLeave\n  } = useDashboardHover();\n\n  // Parse search parameters from URL\n  React.useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    setSearchParams({\n      term: params.get('q') || '',\n      startDate: params.get('startDate') || '',\n      endDate: params.get('endDate') || ''\n    });\n  }, [location.search]);\n  const fetchRoots = React.useCallback(async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/roots/${id}`);\n      const data = await response.json();\n      setRoots(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching root nodes:', error);\n      setRoots([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n  React.useEffect(() => {\n    fetchRoots();\n  }, [fetchRoots]);\n  const handleNewRootCreated = () => {\n    setShowCreateForm(false);\n    fetchRoots();\n  };\n  const handleSearch = (searchTerm, filters = {}) => {\n    const params = new URLSearchParams({\n      q: searchTerm\n    });\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value) params.append(key, value);\n    });\n    navigate(`/search?${params.toString()}`);\n  };\n  const sortedRoots = React.useMemo(() => {\n    return [...roots].sort((a, b) => sortOption === 'latest' ? new Date(b.created_at) - new Date(a.created_at) : new Date(a.created_at) - new Date(b.created_at));\n  }, [roots, sortOption]);\n  if (loading) return /*#__PURE__*/_jsxDEV(LoadingState, {\n    dashboardOpen: dashboardOpen\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container\",\n    children: [/*#__PURE__*/_jsxDEV(DashboardComponent, {\n      dashboardOpen: dashboardOpen,\n      handleHoverEnter: handleHoverEnter,\n      handleHoverLeave: handleHoverLeave,\n      handleDashboardEnter: handleDashboardEnter,\n      handleDashboardLeave: handleDashboardLeave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"roots-container\",\n      children: [/*#__PURE__*/_jsxDEV(RootsHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        onSearch: handleSearch,\n        initialFilters: searchParams\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RootsControls, {\n        onCreateRoot: () => setShowCreateForm(true),\n        sortOption: sortOption,\n        setSortOption: setSortOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), showCreateForm && /*#__PURE__*/_jsxDEV(CreateRootModal, {\n        onClose: handleNewRootCreated,\n        onCancel: () => setShowCreateForm(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RootsGrid, {\n        roots: sortedRoots\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(RootsPage, \"DqVl6ZZYu6V0s74qONRVaaSUDnc=\", false, function () {\n  return [useParams, useLocation, useNavigate, useDashboardHover];\n});\n_c = RootsPage;\nexport default RootsPage;\nvar _c;\n$RefreshReg$(_c, \"RootsPage\");","map":{"version":3,"names":["React","useParams","useLocation","useNavigate","DashboardComponent","useDashboardHover","SearchBar","RootsHeader","RootsControls","RootsGrid","CreateRootModal","LoadingState","jsxDEV","_jsxDEV","RootsPage","_s","id","location","navigate","roots","setRoots","useState","loading","setLoading","showCreateForm","setShowCreateForm","sortOption","setSortOption","searchParams","setSearchParams","dashboardOpen","handleHoverEnter","handleHoverLeave","handleDashboardEnter","handleDashboardLeave","useEffect","params","URLSearchParams","search","term","get","startDate","endDate","fetchRoots","useCallback","response","fetch","data","json","Array","isArray","error","console","handleNewRootCreated","handleSearch","searchTerm","filters","q","Object","entries","forEach","key","value","append","toString","sortedRoots","useMemo","sort","a","b","Date","created_at","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSearch","initialFilters","onCreateRoot","onClose","onCancel","_c","$RefreshReg$"],"sources":["/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/CodeRoot/pages/RootsPage.js"],"sourcesContent":["import React from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport DashboardComponent from '../../CodeDashboard/components/DashboardComponent';\nimport useDashboardHover from '../../CodeDashboard/hooks/UseDashboardHover';\nimport SearchBar from '../../CodeHome/SearchBar';\nimport RootsHeader from './components/RootsHeader';\nimport RootsControls from './components/RootsControls';\nimport RootsGrid from './components/RootsGrid';\nimport CreateRootModal from './components/CreateRootModal';\nimport LoadingState from './components/LoadingState';\nimport '../../CodeCSS/App.css';\n\nconst RootsPage = () => {\n  const { id } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [roots, setRoots] = React.useState([]);\n  const [loading, setLoading] = React.useState(true);\n  const [showCreateForm, setShowCreateForm] = React.useState(false);\n  const [sortOption, setSortOption] = React.useState('latest');\n  const [searchParams, setSearchParams] = React.useState({});\n  \n  const {\n    dashboardOpen,\n    handleHoverEnter,\n    handleHoverLeave,\n    handleDashboardEnter,\n    handleDashboardLeave\n  } = useDashboardHover();\n\n  // Parse search parameters from URL\n  React.useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    setSearchParams({\n      term: params.get('q') || '',\n      startDate: params.get('startDate') || '',\n      endDate: params.get('endDate') || ''\n    });\n  }, [location.search]);\n\n  const fetchRoots = React.useCallback(async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/roots/${id}`);\n      const data = await response.json();\n      setRoots(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching root nodes:', error);\n      setRoots([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  React.useEffect(() => {\n    fetchRoots();\n  }, [fetchRoots]);\n\n  const handleNewRootCreated = () => {\n    setShowCreateForm(false);\n    fetchRoots();\n  };\n\n  const handleSearch = (searchTerm, filters = {}) => {\n    const params = new URLSearchParams({ q: searchTerm });\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value) params.append(key, value);\n    });\n    navigate(`/search?${params.toString()}`);\n  };\n\n  const sortedRoots = React.useMemo(() => {\n    return [...roots].sort((a, b) => \n      sortOption === 'latest' \n        ? new Date(b.created_at) - new Date(a.created_at)\n        : new Date(a.created_at) - new Date(b.created_at)\n    );\n  }, [roots, sortOption]);\n\n  if (loading) return <LoadingState dashboardOpen={dashboardOpen} />;\n\n  return (\n    <div className=\"page-container\">\n      <DashboardComponent \n        dashboardOpen={dashboardOpen}\n        handleHoverEnter={handleHoverEnter}\n        handleHoverLeave={handleHoverLeave}\n        handleDashboardEnter={handleDashboardEnter}\n        handleDashboardLeave={handleDashboardLeave}\n      />\n\n      <main className=\"roots-container\">\n        <RootsHeader />\n        \n        <SearchBar \n          onSearch={handleSearch} \n          initialFilters={searchParams} \n        />\n\n        <RootsControls \n          onCreateRoot={() => setShowCreateForm(true)}\n          sortOption={sortOption}\n          setSortOption={setSortOption}\n        />\n\n        {showCreateForm && (\n          <CreateRootModal \n            onClose={handleNewRootCreated}\n            onCancel={() => setShowCreateForm(false)}\n          />\n        )}\n\n        <RootsGrid roots={sortedRoots} />\n      </main>\n    </div>\n  );\n};\n\nexport default RootsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}