{"ast":null,"code":"var _jsxFileName = \"/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/CodeNode/components/NodeDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ScoreBar from '../../utils/visuals/ScoreBar';\nimport '../nonGlobalStyle/NodeDetails.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NodeDetails = ({\n  node,\n  user\n}) => {\n  _s();\n  const [currentNode, setCurrentNode] = useState(node);\n  const [userReaction, setUserReaction] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // Initialize reaction state when component mounts or node changes\n  useEffect(() => {\n    if (node.userReaction !== undefined) {\n      setUserReaction(node.userReaction);\n    }\n  }, [node]);\n  const handleReaction = async reactionType => {\n    if (!user || !user.UUID) {\n      alert('Please login to react');\n      return;\n    }\n    setLoading(true);\n    try {\n      let endpoint = '';\n      let newReaction = null;\n      if (reactionType === 1) {\n        // Like\n        if (userReaction === 1) {\n          endpoint = `unlike/${user.UUID}`;\n          newReaction = null;\n        } else {\n          endpoint = `like/${user.UUID}`;\n          newReaction = 1;\n        }\n      } else {\n        // Dislike\n        if (userReaction === 2) {\n          endpoint = `undislike/${user.UUID}`;\n          newReaction = null;\n        } else {\n          endpoint = `dislike/${user.UUID}`;\n          newReaction = 2;\n        }\n      }\n      await axios.post(`/api/nodes/${node.id}/${endpoint}`);\n\n      // Optimistic UI update\n      setUserReaction(newReaction);\n      setCurrentNode(prev => ({\n        ...prev,\n        likes: reactionType === 1 ? userReaction === 1 ? prev.likes - 1 : userReaction === 2 ? prev.likes + 1 : prev.likes + 1 : prev.likes,\n        dislikes: reactionType === 2 ? userReaction === 2 ? prev.dislikes - 1 : userReaction === 1 ? prev.dislikes + 1 : prev.dislikes + 1 : prev.dislikes\n      }));\n    } catch (error) {\n      console.error('Error updating reaction:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"node-detail mb-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"card-title text-accent\",\n        children: [currentNode.title || `Node ${currentNode.id}`, \":\", currentNode.statementTrueFalseFlag === null ? \" Current statement to Prove\" : currentNode.statementTrueFalseFlag ? \" True\" : \" False\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead text-secondary\",\n        children: [\"Explanation: \", currentNode.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead text-secondary\",\n        children: [\"Popularity: \", currentNode.popularity]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead text-secondary\",\n        children: [\"You are: \", (user === null || user === void 0 ? void 0 : user.username) || 'Guest']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reaction-buttons mt-3 mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${userReaction === 1 ? 'btn-success' : 'btn-outline-success'} me-2`,\n          onClick: () => handleReaction(1),\n          disabled: loading,\n          children: [\"\\uD83D\\uDC4D Like (\", currentNode.likes || 0, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${userReaction === 2 ? 'btn-danger' : 'btn-outline-danger'}`,\n          onClick: () => handleReaction(2),\n          disabled: loading,\n          children: [\"\\uD83D\\uDC4E Dislike (\", currentNode.dislikes || 0, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ScoreBar, {\n        score: currentNode.popularity,\n        height: 10,\n        color: \"#f0ac29\",\n        label: \"Popularity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ScoreBar, {\n        score: currentNode.score,\n        height: 10,\n        color: \"#4285F4\",\n        label: \"Weighted Average Score\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(NodeDetails, \"965livW5jTuRUPhxDsRyPTs/ny8=\");\n_c = NodeDetails;\nexport default NodeDetails;\nvar _c;\n$RefreshReg$(_c, \"NodeDetails\");","map":{"version":3,"names":["React","useState","useEffect","ScoreBar","axios","jsxDEV","_jsxDEV","NodeDetails","node","user","_s","currentNode","setCurrentNode","userReaction","setUserReaction","loading","setLoading","undefined","handleReaction","reactionType","UUID","alert","endpoint","newReaction","post","id","prev","likes","dislikes","error","console","className","children","title","statementTrueFalseFlag","fileName","_jsxFileName","lineNumber","columnNumber","content","popularity","username","onClick","disabled","score","height","color","label","_c","$RefreshReg$"],"sources":["/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/CodeNode/components/NodeDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ScoreBar from '../../utils/visuals/ScoreBar';\nimport '../nonGlobalStyle/NodeDetails.css';\nimport axios from 'axios';\n\nconst NodeDetails = ({ node, user }) => {\n  const [currentNode, setCurrentNode] = useState(node);\n  const [userReaction, setUserReaction] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // Initialize reaction state when component mounts or node changes\n  useEffect(() => {\n    if (node.userReaction !== undefined) {\n      setUserReaction(node.userReaction);\n    }\n  }, [node]);\n\n  const handleReaction = async (reactionType) => {\n    if (!user || !user.UUID) {\n      alert('Please login to react');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      let endpoint = '';\n      let newReaction = null;\n\n      if (reactionType === 1) { // Like\n        if (userReaction === 1) {\n          endpoint = `unlike/${user.UUID}`;\n          newReaction = null;\n        } else {\n          endpoint = `like/${user.UUID}`;\n          newReaction = 1;\n        }\n      } else { // Dislike\n        if (userReaction === 2) {\n          endpoint = `undislike/${user.UUID}`;\n          newReaction = null;\n        } else {\n          endpoint = `dislike/${user.UUID}`;\n          newReaction = 2;\n        }\n      }\n\n      await axios.post(`/api/nodes/${node.id}/${endpoint}`);\n      \n      // Optimistic UI update\n      setUserReaction(newReaction);\n      setCurrentNode(prev => ({\n        ...prev,\n        likes: reactionType === 1 \n          ? (userReaction === 1 ? prev.likes - 1 : (userReaction === 2 ? prev.likes + 1 : prev.likes + 1))\n          : prev.likes,\n        dislikes: reactionType === 2 \n          ? (userReaction === 2 ? prev.dislikes - 1 : (userReaction === 1 ? prev.dislikes + 1 : prev.dislikes + 1))\n          : prev.dislikes\n      }));\n\n    } catch (error) {\n      console.error('Error updating reaction:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"node-detail mb-4\">\n      <div className=\"card-body\">\n        <h1 className=\"card-title text-accent\">\n          {currentNode.title || `Node ${currentNode.id}`}: \n          {currentNode.statementTrueFalseFlag === null\n            ? \" Current statement to Prove\" \n            : currentNode.statementTrueFalseFlag \n              ? \" True\" \n              : \" False\"\n          }\n        </h1>\n        <p className=\"lead text-secondary\">Explanation: {currentNode.content}</p>\n        <p className=\"lead text-secondary\">Popularity: {currentNode.popularity}</p>\n        <p className=\"lead text-secondary\">You are: {user?.username || 'Guest'}</p>\n\n        {/* Reaction Buttons */}\n        <div className=\"reaction-buttons mt-3 mb-3\">\n          <button \n            className={`btn ${userReaction === 1 ? 'btn-success' : 'btn-outline-success'} me-2`}\n            onClick={() => handleReaction(1)}\n            disabled={loading}\n          >\n            👍 Like ({currentNode.likes || 0})\n          </button>\n          <button \n            className={`btn ${userReaction === 2 ? 'btn-danger' : 'btn-outline-danger'}`}\n            onClick={() => handleReaction(2)}\n            disabled={loading}\n          >\n            👎 Dislike ({currentNode.dislikes || 0})\n          </button>\n        </div>\n\n        <ScoreBar \n          score={currentNode.popularity} \n          height={10}\n          color=\"#f0ac29\"\n          label=\"Popularity\"\n        />\n\n        <ScoreBar \n          score={currentNode.score} \n          height={10}\n          color=\"#4285F4\"\n          label=\"Weighted Average Score\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default NodeDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}