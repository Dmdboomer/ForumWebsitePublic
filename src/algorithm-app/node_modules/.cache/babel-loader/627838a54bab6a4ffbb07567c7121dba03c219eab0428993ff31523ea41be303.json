{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Link}from'react-router-dom';import ScoreBar from'../../utils/visuals/ScoreBar';import{saveNode}from'../../CodeProfile/services/profileAPI';// Adjust import path as needed\nimport'../../CodeCSS/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RootCard=_ref=>{let{root,userUUID}=_ref;const[dropdownOpen,setDropdownOpen]=useState(false);const dropdownRef=useRef(null);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setDropdownOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const handleSave=async()=>{if(!userUUID){alert('Please log in to save nodes');return;}try{await saveNode(userUUID,root.id);alert('Node saved successfully!');setDropdownOpen(false);}catch(error){alert(\"Save failed: \".concat(error.message));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"root-card\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/node/\".concat(root.id),className:\"root-link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"root-icon\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCDA\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"root-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"root-title\",children:root.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"root-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"sub-topics\",children:[\"Leafs: \",root.leaf_count_in_subtree||0]}),/*#__PURE__*/_jsxs(\"span\",{className:\"popularity\",children:[\"Popularity: \",root.popularity]}),/*#__PURE__*/_jsx(ScoreBar,{score:root.score,height:10,color:\"#4285F4\",label:\"Weighted Average Score\"}),root.created_at&&/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:new Date(root.created_at).toLocaleDateString()})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"root-actions\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-toggle\",onClick:e=>{console.log(\"Button clicked!\");// Add this\ne.preventDefault();e.stopPropagation();setDropdownOpen(!dropdownOpen);},children:\"\\u22EE\"}),dropdownOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:e=>{e.preventDefault();e.stopPropagation();handleSave();},children:\"Save\"})})]})]});};export default RootCard;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","ScoreBar","saveNode","jsx","_jsx","jsxs","_jsxs","RootCard","_ref","root","userUUID","dropdownOpen","setDropdownOpen","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleSave","alert","id","error","concat","message","className","children","to","title","leaf_count_in_subtree","popularity","score","height","color","label","created_at","Date","toLocaleDateString","ref","onClick","e","console","log","preventDefault","stopPropagation"],"sources":["/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/src/algorithm-app/src/CodeRoot/components/RootCard.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport ScoreBar from '../../utils/visuals/ScoreBar';\nimport { saveNode } from '../../CodeProfile/services/profileAPI'; // Adjust import path as needed\nimport '../../CodeCSS/App.css'\n\nconst RootCard = ({ root, userUUID }) => {\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  const dropdownRef = useRef(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleSave = async () => {\n    if (!userUUID) {\n      alert('Please log in to save nodes');\n      return;\n    }\n\n    try {\n      await saveNode(userUUID, root.id);\n      alert('Node saved successfully!');\n      setDropdownOpen(false);\n    } catch (error) {\n      alert(`Save failed: ${error.message}`);\n    }\n  };\n\n  return (\n    <div className=\"root-card\">\n      <Link to={`/node/${root.id}`} className=\"root-link\">\n        <div className=\"root-icon\">\n          <span>ðŸ“š</span>\n        </div>\n        <div className=\"root-info\">\n          <h3 className=\"root-title\">{root.title}</h3>\n          <div className=\"root-meta\">\n            <span className=\"sub-topics\">Leafs: {root.leaf_count_in_subtree || 0}</span>\n            <span className=\"popularity\">Popularity: {root.popularity}</span>\n            <ScoreBar \n              score={root.score} \n              height={10}\n              color=\"#4285F4\"\n              label=\"Weighted Average Score\"\n            />\n            {root.created_at && (\n              <span className=\"date\">\n                {new Date(root.created_at).toLocaleDateString()}\n              </span>\n            )}\n          </div>\n        </div>\n      </Link>\n      \n      {/* Dropdown menu */}\n      <div className=\"root-actions\" ref={dropdownRef}>\n        <button \n          className=\"dropdown-toggle\"\n          onClick={(e) => {\n            console.log(\"Button clicked!\"); // Add this\n            e.preventDefault();\n            e.stopPropagation();\n            setDropdownOpen(!dropdownOpen);\n          }}\n        >\n          â‹®\n        </button>\n        \n        {dropdownOpen && (\n          <div className=\"dropdown-menu\">\n            <button \n              className=\"dropdown-item\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                handleSave();\n              }}\n            >\n              Save\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RootCard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,QAAQ,KAAM,8BAA8B,CACnD,OAASC,QAAQ,KAAQ,uCAAuC,CAAE;AAClE,MAAO,uBAAuB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAwB,IAAvB,CAAEC,IAAI,CAAEC,QAAS,CAAC,CAAAF,IAAA,CAClC,KAAM,CAACG,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAAgB,WAAW,CAAGf,MAAM,CAAC,IAAI,CAAC,CAEhC;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIF,WAAW,CAACG,OAAO,EAAI,CAACH,WAAW,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CACtEN,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAEDO,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAMK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC5E,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACZ,QAAQ,CAAE,CACba,KAAK,CAAC,6BAA6B,CAAC,CACpC,OACF,CAEA,GAAI,CACF,KAAM,CAAArB,QAAQ,CAACQ,QAAQ,CAAED,IAAI,CAACe,EAAE,CAAC,CACjCD,KAAK,CAAC,0BAA0B,CAAC,CACjCX,eAAe,CAAC,KAAK,CAAC,CACxB,CAAE,MAAOa,KAAK,CAAE,CACdF,KAAK,iBAAAG,MAAA,CAAiBD,KAAK,CAACE,OAAO,CAAE,CAAC,CACxC,CACF,CAAC,CAED,mBACErB,KAAA,QAAKsB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBvB,KAAA,CAACN,IAAI,EAAC8B,EAAE,UAAAJ,MAAA,CAAWjB,IAAI,CAACe,EAAE,CAAG,CAACI,SAAS,CAAC,WAAW,CAAAC,QAAA,eACjDzB,IAAA,QAAKwB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBzB,IAAA,SAAAyB,QAAA,CAAM,cAAE,CAAM,CAAC,CACZ,CAAC,cACNvB,KAAA,QAAKsB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzB,IAAA,OAAIwB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEpB,IAAI,CAACsB,KAAK,CAAK,CAAC,cAC5CzB,KAAA,QAAKsB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBvB,KAAA,SAAMsB,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,SAAO,CAACpB,IAAI,CAACuB,qBAAqB,EAAI,CAAC,EAAO,CAAC,cAC5E1B,KAAA,SAAMsB,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,cAAY,CAACpB,IAAI,CAACwB,UAAU,EAAO,CAAC,cACjE7B,IAAA,CAACH,QAAQ,EACPiC,KAAK,CAAEzB,IAAI,CAACyB,KAAM,CAClBC,MAAM,CAAE,EAAG,CACXC,KAAK,CAAC,SAAS,CACfC,KAAK,CAAC,wBAAwB,CAC/B,CAAC,CACD5B,IAAI,CAAC6B,UAAU,eACdlC,IAAA,SAAMwB,SAAS,CAAC,MAAM,CAAAC,QAAA,CACnB,GAAI,CAAAU,IAAI,CAAC9B,IAAI,CAAC6B,UAAU,CAAC,CAACE,kBAAkB,CAAC,CAAC,CAC3C,CACP,EACE,CAAC,EACH,CAAC,EACF,CAAC,cAGPlC,KAAA,QAAKsB,SAAS,CAAC,cAAc,CAACa,GAAG,CAAE5B,WAAY,CAAAgB,QAAA,eAC7CzB,IAAA,WACEwB,SAAS,CAAC,iBAAiB,CAC3Bc,OAAO,CAAGC,CAAC,EAAK,CACdC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAAE;AAChCF,CAAC,CAACG,cAAc,CAAC,CAAC,CAClBH,CAAC,CAACI,eAAe,CAAC,CAAC,CACnBnC,eAAe,CAAC,CAACD,YAAY,CAAC,CAChC,CAAE,CAAAkB,QAAA,CACH,QAED,CAAQ,CAAC,CAERlB,YAAY,eACXP,IAAA,QAAKwB,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BzB,IAAA,WACEwB,SAAS,CAAC,eAAe,CACzBc,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACG,cAAc,CAAC,CAAC,CAClBH,CAAC,CAACI,eAAe,CAAC,CAAC,CACnBzB,UAAU,CAAC,CAAC,CACd,CAAE,CAAAO,QAAA,CACH,MAED,CAAQ,CAAC,CACN,CACN,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}