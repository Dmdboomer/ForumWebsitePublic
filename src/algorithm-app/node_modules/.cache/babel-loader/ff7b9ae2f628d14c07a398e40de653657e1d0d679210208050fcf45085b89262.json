{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import DashboardComponent from'../CodeDashboard/components/DashboardComponent';import SearchBar from'./SearchBar';import useDashboardHover from'../CodeDashboard/hooks/UseDashboardHover';import ScoreBar from'../utils/visuals/ScoreBar';import{searchAPI}from'./services/searchAPI';import'../CodeCSS/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchResultsPage=()=>{const location=useLocation();const navigate=useNavigate();const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[searchParams,setSearchParams]=useState({});const{dashboardOpen,handleHoverEnter,handleHoverLeave,handleDashboardEnter,handleDashboardLeave}=useDashboardHover();useEffect(()=>{const params=new URLSearchParams(location.search);const term=params.get('q')||'';const startDate=params.get('startDate')||'';const endDate=params.get('endDate')||'';setSearchParams({term,startDate,endDate});if(term)performSearch(term,startDate,endDate);},[location.search]);const performSearch=async(term,startDate,endDate)=>{setLoading(true);try{const data=await searchAPI.performSearch(term,startDate,endDate);setResults(data);}catch(error){console.error('Search failed:',error);setResults([]);}finally{setLoading(false);}};const handleSearch=function(searchTerm){let filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const params=new URLSearchParams({q:searchTerm});Object.entries(filters).forEach(_ref=>{let[key,value]=_ref;if(value)params.append(key,value);});navigate(\"/search?\".concat(params.toString()));};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(DashboardComponent,{dashboardOpen:dashboardOpen,handleHoverEnter:handleHoverEnter,handleHoverLeave:handleHoverLeave,handleDashboardEnter:handleDashboardEnter,handleDashboardLeave:handleDashboardLeave}),/*#__PURE__*/_jsxs(\"main\",{className:\"search-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Search Results\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Explore matching knowledge items\"})]}),/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearch,initialFilters:searchParams}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Searching knowledge base...\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"results-section\",children:results.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"results-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Search Results (\",results.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"results-grid\",children:results.map(result=>/*#__PURE__*/_jsx(\"div\",{className:\"result-card\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"/node/\".concat(result.id),className:\"result-link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"result-icon\",children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"result-title\",children:result.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Leaves: \",result.leafCount||0]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Popularity: \",result.popularity]}),/*#__PURE__*/_jsx(ScoreBar,{score:(result.score*100).toFixed(2),height:10,color:\"#4285F4\",label:\"Weighted Average Score\"}),result.date&&/*#__PURE__*/_jsxs(\"span\",{children:[\"Date: \",new Date(result.date).toLocaleDateString()]})]})]})]})},result.id))})]}):!loading&&searchParams.searchTerm&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-results\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"No results found for \\\"\",searchParams.searchTerm,\"\\\"\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate('/'),children:\"New Search\"})]})})]})]});};export default SearchResultsPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","DashboardComponent","SearchBar","useDashboardHover","ScoreBar","searchAPI","jsx","_jsx","jsxs","_jsxs","SearchResultsPage","location","navigate","results","setResults","loading","setLoading","searchParams","setSearchParams","dashboardOpen","handleHoverEnter","handleHoverLeave","handleDashboardEnter","handleDashboardLeave","params","URLSearchParams","search","term","get","startDate","endDate","performSearch","data","error","console","handleSearch","searchTerm","filters","arguments","length","undefined","q","Object","entries","forEach","_ref","key","value","append","concat","toString","className","children","onSearch","initialFilters","map","result","href","id","title","leafCount","popularity","score","toFixed","height","color","label","date","Date","toLocaleDateString","onClick"],"sources":["/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/src/algorithm-app/src/CodeHome/SearchResultPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport DashboardComponent from '../CodeDashboard/components/DashboardComponent';\nimport SearchBar from './SearchBar';\nimport useDashboardHover from '../CodeDashboard/hooks/UseDashboardHover';\nimport ScoreBar from '../utils/visuals/ScoreBar';\nimport { searchAPI } from './services/searchAPI';\nimport '../CodeCSS/App.css'\n\nconst SearchResultsPage = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [searchParams, setSearchParams] = useState({});\n  \n  const {\n    dashboardOpen,\n    handleHoverEnter,\n    handleHoverLeave,\n    handleDashboardEnter,\n    handleDashboardLeave\n  } = useDashboardHover();\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const term = params.get('q') || '';\n    const startDate = params.get('startDate') || '';\n    const endDate = params.get('endDate') || '';\n    \n    setSearchParams({ term, startDate, endDate });\n    \n    if (term) performSearch(term, startDate, endDate);\n  }, [location.search]);\n\n  const performSearch = async (term, startDate, endDate) => {\n    setLoading(true);\n    try {\n      const data = await searchAPI.performSearch(term, startDate, endDate);\n      setResults(data);\n    } catch (error) {\n      console.error('Search failed:', error);\n      setResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = (searchTerm, filters = {}) => {\n    const params = new URLSearchParams({ q: searchTerm });\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value) params.append(key, value);\n    });\n    navigate(`/search?${params.toString()}`);\n  };\n\n  return (\n    <div className=\"page-container\">\n      <DashboardComponent \n        dashboardOpen={dashboardOpen}\n        handleHoverEnter={handleHoverEnter}\n        handleHoverLeave={handleHoverLeave}\n        handleDashboardEnter={handleDashboardEnter}\n        handleDashboardLeave={handleDashboardLeave}\n      />\n\n      <main className=\"search-page\">\n        <div className=\"search-header\">\n          <h1>Search Results</h1>\n          <p>Explore matching knowledge items</p>\n        </div>\n\n        <SearchBar onSearch={handleSearch} initialFilters={searchParams} />\n\n        {loading && (\n          <div className=\"loading-container\">\n            <div className=\"spinner\"></div>\n            <p>Searching knowledge base...</p>\n          </div>\n        )}\n\n        <section className=\"results-section\">\n          {results.length > 0 ? (\n            <div className=\"results-container\">\n              <h2>Search Results ({results.length})</h2>\n              <div className=\"results-grid\">\n                {results.map(result => (\n                  <div key={result.id} className=\"result-card\">\n                    <a href={`/node/${result.id}`} className=\"result-link\">\n                      <div className=\"result-icon\">ðŸ“š</div>\n                      <div className=\"result-content\">\n                        <h3 className=\"result-title\">{result.title}</h3>\n                        <div className=\"result-meta\">\n                          <span>Leaves: {result.leafCount || 0}</span>\n                          <span>Popularity: {result.popularity}</span>\n                          <ScoreBar \n                            score={(result.score*100).toFixed(2)} \n                            height={10}\n                            color=\"#4285F4\"\n                            label=\"Weighted Average Score\"\n                          />\n                          {result.date && <span>Date: {new Date(result.date).toLocaleDateString()}</span>}\n                        </div>\n                      </div>\n                    </a>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ) : (\n            !loading && searchParams.searchTerm && (\n              <div className=\"empty-results\">\n                <p>No results found for \"{searchParams.searchTerm}\"</p>\n                <button \n                  className=\"btn btn-secondary\"\n                  onClick={() => navigate('/')}\n                >\n                  New Search\n                </button>\n              </div>\n            )\n          )}\n        </section>\n      </main>\n    </div>\n  );\n};\n\nexport default SearchResultsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}