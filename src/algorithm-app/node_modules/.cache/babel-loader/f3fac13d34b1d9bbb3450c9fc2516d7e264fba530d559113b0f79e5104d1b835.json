{"ast":null,"code":"var _jsxFileName = \"/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/components/NodePageComponents/CommentsSection.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport CreateComment from './CreateComment';\nimport getTimeDisplay from '../../utils/helperFunctions/GetTimeSince';\nimport { fetchComments, endorseComment, unendorseComment, reportComment, unreportComment, createComment } from '../../services/commentsAPI';\nimport { useAuth } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentsSection = ({\n  nodeId\n}) => {\n  _s();\n  const [comments, setComments] = React.useState([]);\n  const [showCommentForm, setShowCommentForm] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [processing, setProcessing] = React.useState({});\n  const {\n    user\n  } = useAuth();\n  React.useEffect(() => {\n    let isMounted = true;\n    const loadComments = async () => {\n      try {\n        setIsLoading(true);\n        if (!nodeId) {\n          setComments([]);\n          return;\n        }\n\n        // Pass current user ID to fetch user-specific flags\n        const userId = (user === null || user === void 0 ? void 0 : user.UUID) || null;\n        const commentsData = await fetchComments(nodeId, userId);\n        if (isMounted) setComments(commentsData);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        if (isMounted) setIsLoading(false);\n      }\n    };\n    loadComments();\n    return () => {\n      isMounted = false;\n    };\n  }, [nodeId, user]);\n  const handleNewComment = async content => {\n    try {\n      const newComment = await createComment(nodeId, content);\n      setComments(prev => [newComment, ...prev]);\n      setShowCommentForm(false);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    }\n  };\n  const handleEndorse = async commentId => {\n    if (processing[commentId] || !user) return;\n    setProcessing(prev => ({\n      ...prev,\n      [commentId]: 'endorsing'\n    }));\n    try {\n      var _comments$find;\n      const isEndorsed = (_comments$find = comments.find(c => c.id === commentId)) === null || _comments$find === void 0 ? void 0 : _comments$find.is_endorsed;\n\n      // Toggle endorsement status\n      if (isEndorsed) {\n        await unendorseComment(nodeId, commentId, user.UUID);\n      } else {\n        await endorseComment(nodeId, commentId, user.UUID);\n      }\n\n      // Update local state\n      setComments(prev => prev.map(comment => comment.id === commentId ? {\n        ...comment,\n        is_endorsed: !isEndorsed,\n        endorsement_count: isEndorsed ? Math.max(0, comment.endorsement_count - 1) : comment.endorsement_count + 1\n      } : comment));\n    } catch (error) {\n      console.error('Error toggling endorsement:', error);\n    } finally {\n      setProcessing(prev => {\n        const newState = {\n          ...prev\n        };\n        delete newState[commentId];\n        return newState;\n      });\n    }\n  };\n  const handleReport = async commentId => {\n    if (processing[commentId] || !user) return;\n    setProcessing(prev => ({\n      ...prev,\n      [commentId]: 'reporting'\n    }));\n    try {\n      var _comments$find2;\n      const isReported = (_comments$find2 = comments.find(c => c.id === commentId)) === null || _comments$find2 === void 0 ? void 0 : _comments$find2.is_reported;\n\n      // Toggle report status\n      if (isReported) {\n        await unreportComment(nodeId, commentId, user.UUID);\n      } else {\n        await reportComment(nodeId, commentId, user.UUID);\n      }\n\n      // Update local state\n      setComments(prev => prev.map(comment => comment.id === commentId ? {\n        ...comment,\n        is_reported: !isReported,\n        report_count: isReported ? Math.max(0, comment.report_count - 1) : comment.report_count + 1\n      } : comment));\n    } catch (error) {\n      console.error('Error toggling report:', error);\n    } finally {\n      setProcessing(prev => {\n        const newState = {\n          ...prev\n        };\n        delete newState[commentId];\n        return newState;\n      });\n    }\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center my-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header bg-light d-flex justify-content-between align-items-center py-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"h5 mb-0\",\n        children: \"Attempts to solve\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn btn-sm ${showCommentForm ? 'btn-outline-secondary' : 'btn-primary'}`,\n        onClick: () => setShowCommentForm(!showCommentForm),\n        disabled: !nodeId,\n        children: showCommentForm ? 'Cancel' : 'Add New'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), showCommentForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body border-bottom\",\n      children: /*#__PURE__*/_jsxDEV(CreateComment, {\n        onCommentCreated: handleNewComment,\n        nodeId: nodeId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-group list-group-flush\",\n      children: comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted\",\n          children: \"No comments yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-link\",\n          onClick: () => setShowCommentForm(true),\n          disabled: !nodeId,\n          children: \"Be the first to add a comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this) : comments.map(comment => comment && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-group-item border-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0 me-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-light rounded-circle d-flex align-items-center justify-content-center\",\n              style: {\n                width: '40px',\n                height: '40px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-muted\",\n                children: \"U\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-grow-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: comment.comment_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-muted\",\n                children: [\"Posted \", getTimeDisplay(comment.created_at)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn btn-sm ${comment.is_endorsed ? 'btn-success' : 'btn-outline-success'}`,\n                  onClick: () => handleEndorse(comment.id),\n                  disabled: processing[comment.id] || !user,\n                  children: processing[comment.id] === 'endorsing' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 29\n                  }, this) : `Endorse${comment.endorsement_count ? ` (${comment.endorsement_count})` : ''}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn btn-sm ${comment.is_reported ? 'btn-danger' : 'btn-outline-danger'}`,\n                  onClick: () => handleReport(comment.id),\n                  disabled: processing[comment.id] || !user,\n                  children: processing[comment.id] === 'reporting' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm\",\n                    role: \"status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 29\n                  }, this) : `Report${comment.report_count > 0 ? ` (${comment.report_count})` : ''}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 17\n        }, this)\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentsSection, \"fZwlFK9GuAIeeodpphviIybEpYY=\", false, function () {\n  return [useAuth];\n});\n_c = CommentsSection;\nexport default CommentsSection;\nvar _c;\n$RefreshReg$(_c, \"CommentsSection\");","map":{"version":3,"names":["React","CreateComment","getTimeDisplay","fetchComments","endorseComment","unendorseComment","reportComment","unreportComment","createComment","useAuth","jsxDEV","_jsxDEV","CommentsSection","nodeId","_s","comments","setComments","useState","showCommentForm","setShowCommentForm","isLoading","setIsLoading","processing","setProcessing","user","useEffect","isMounted","loadComments","userId","UUID","commentsData","error","console","handleNewComment","content","newComment","prev","handleEndorse","commentId","_comments$find","isEndorsed","find","c","id","is_endorsed","map","comment","endorsement_count","Math","max","newState","handleReport","_comments$find2","isReported","is_reported","report_count","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onCommentCreated","length","style","width","height","comment_text","created_at","_c","$RefreshReg$"],"sources":["/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/components/NodePageComponents/CommentsSection.js"],"sourcesContent":["import React from 'react';\nimport CreateComment from './CreateComment';\nimport getTimeDisplay from '../../utils/helperFunctions/GetTimeSince';\nimport { \n  fetchComments,\n  endorseComment,\n  unendorseComment,\n  reportComment,\n  unreportComment,\n  createComment\n} from '../../services/commentsAPI';\nimport { useAuth } from '../../context/AuthContext';\n\nconst CommentsSection = ({ nodeId }) => {\n  const [comments, setComments] = React.useState([]);\n  const [showCommentForm, setShowCommentForm] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [processing, setProcessing] = React.useState({});\n  const { user } = useAuth();\n\n  React.useEffect(() => {\n    let isMounted = true;\n\n    const loadComments = async () => {\n      try {\n        setIsLoading(true);\n        if (!nodeId) {\n          setComments([]);\n          return;\n        }\n\n        // Pass current user ID to fetch user-specific flags\n        const userId = user?.UUID || null;\n        const commentsData = await fetchComments(nodeId, userId);\n        if (isMounted) setComments(commentsData);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        if (isMounted) setIsLoading(false);\n      }\n    };\n\n    loadComments();\n\n    return () => { isMounted = false; };\n  }, [nodeId, user]);\n\n  const handleNewComment = async (content) => {\n    try {\n      const newComment = await createComment(nodeId, content);\n      setComments(prev => [newComment, ...prev]);\n      setShowCommentForm(false);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    }\n  };\n\n  const handleEndorse = async (commentId) => {\n    if (processing[commentId] || !user) return;\n    \n    setProcessing(prev => ({...prev, [commentId]: 'endorsing'}));\n    try {\n      const isEndorsed = comments.find(c => c.id === commentId)?.is_endorsed;\n      \n      // Toggle endorsement status\n      if (isEndorsed) {\n        await unendorseComment(nodeId, commentId, user.UUID);\n      } else {\n        await endorseComment(nodeId, commentId, user.UUID);\n      }\n      \n      // Update local state\n      setComments(prev => prev.map(comment => \n        comment.id === commentId \n          ? { \n              ...comment, \n              is_endorsed: !isEndorsed,\n              endorsement_count: isEndorsed \n                ? Math.max(0, comment.endorsement_count - 1)\n                : comment.endorsement_count + 1\n            } \n          : comment\n      ));\n    } catch (error) {\n      console.error('Error toggling endorsement:', error);\n    } finally {\n      setProcessing(prev => {\n        const newState = {...prev};\n        delete newState[commentId];\n        return newState;\n      });\n    }\n  };\n\n  const handleReport = async (commentId) => {\n    if (processing[commentId] || !user) return;\n    \n    setProcessing(prev => ({...prev, [commentId]: 'reporting'}));\n    try {\n      const isReported = comments.find(c => c.id === commentId)?.is_reported;\n      \n      // Toggle report status\n      if (isReported) {\n        await unreportComment(nodeId, commentId, user.UUID);\n      } else {\n        await reportComment(nodeId, commentId, user.UUID);\n      }\n      \n      // Update local state\n      setComments(prev => prev.map(comment => \n        comment.id === commentId \n          ? { \n              ...comment, \n              is_reported: !isReported,\n              report_count: isReported \n                ? Math.max(0, comment.report_count - 1)\n                : comment.report_count + 1\n            } \n          : comment\n      ));\n    } catch (error) {\n      console.error('Error toggling report:', error);\n    } finally {\n      setProcessing(prev => {\n        const newState = {...prev};\n        delete newState[commentId];\n        return newState;\n      });\n    }\n  };\n\n  if (isLoading) return (\n    <div className=\"d-flex justify-content-center my-5\">\n      <div className=\"spinner-border\" role=\"status\">\n        <span className=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"card mb-4\">\n      <div className=\"card-header bg-light d-flex justify-content-between align-items-center py-3\">\n        <h2 className=\"h5 mb-0\">Attempts to solve</h2>\n        <button \n          className={`btn btn-sm ${showCommentForm ? 'btn-outline-secondary' : 'btn-primary'}`}\n          onClick={() => setShowCommentForm(!showCommentForm)}\n          disabled={!nodeId}\n        >\n          {showCommentForm ? 'Cancel' : 'Add New'}\n        </button>\n      </div>\n      \n      {showCommentForm && (\n        <div className=\"card-body border-bottom\">\n          <CreateComment \n            onCommentCreated={handleNewComment}\n            nodeId={nodeId}\n          />\n        </div>\n      )}\n      \n      <div className=\"list-group list-group-flush\">\n        {comments.length === 0 ? (\n          <div className=\"text-center py-4\">\n            <p className=\"text-muted\">No comments yet</p>\n            <button \n              className=\"btn btn-link\"\n              onClick={() => setShowCommentForm(true)}\n              disabled={!nodeId}\n            >\n              Be the first to add a comment\n            </button>\n          </div>\n        ) : (\n          comments.map(comment => (\n            comment && (\n              <div key={comment.id} className=\"list-group-item border-0\">\n                <div className=\"d-flex\">\n                  <div className=\"flex-shrink-0 me-3\">\n                    <div \n                      className=\"bg-light rounded-circle d-flex align-items-center justify-content-center\" \n                      style={{width: '40px', height: '40px'}}\n                    >\n                      <span className=\"text-muted\">U</span>\n                    </div>\n                  </div>\n                  <div className=\"flex-grow-1\">\n                    <p className=\"mb-1\">{comment.comment_text}</p>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                      <small className=\"text-muted\">\n                        Posted {getTimeDisplay(comment.created_at)}\n                      </small>\n                      <div className=\"d-flex gap-1\">\n                        <button\n                          className={`btn btn-sm ${\n                            comment.is_endorsed ? 'btn-success' : 'btn-outline-success'\n                          }`}\n                          onClick={() => handleEndorse(comment.id)}\n                          disabled={processing[comment.id] || !user}\n                        >\n                          {processing[comment.id] === 'endorsing' ? (\n                            <span className=\"spinner-border spinner-border-sm\" />\n                          ) : (\n                            `Endorse${comment.endorsement_count ? ` (${comment.endorsement_count})` : ''}`\n                          )}\n                        </button>\n                        <button \n                          className={`btn btn-sm ${\n                            comment.is_reported \n                              ? 'btn-danger' \n                              : 'btn-outline-danger'\n                          }`}\n                          onClick={() => handleReport(comment.id)}\n                          disabled={processing[comment.id] || !user}\n                        >\n                          {processing[comment.id] === 'reporting' ? (\n                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" />\n                          ) : (\n                            `Report${comment.report_count > 0 ? ` (${comment.report_count})` : ''}`\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CommentsSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}