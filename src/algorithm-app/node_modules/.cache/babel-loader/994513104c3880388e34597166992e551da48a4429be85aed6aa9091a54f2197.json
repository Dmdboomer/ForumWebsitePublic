{"ast":null,"code":"// src/services/commentsAPI.js\n\nexport const fetchComments = async (nodeId, userId = null) => {\n  const url = new URL(`/api/nodes/${nodeId}/comments`);\n  if (userId) url.searchParams.append('userId', userId);\n  const response = await fetch(url);\n  if (!response.ok) throw new Error('Network response was not ok');\n  return response.json();\n};\nexport const refreshComments = async nodeId => {\n  const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments`);\n  if (!response.ok) throw new Error('Failed to refresh comments');\n  return response.json();\n};\nexport const createComment = async (nodeId, content, proStatus) => {\n  try {\n    const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        content,\n        proStatus\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'API request failed');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API call error:', error);\n    throw error;\n  }\n};\nexport const endorseComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments/${commentId}/endorse/${userId}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to endorse comment');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Endorse error:', error);\n    throw error;\n  }\n};\n\n// NEW: Report comment endpoint\nexport const reportComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments/${commentId}/report/${userId}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to report comment');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Report error:', error);\n    throw error;\n  }\n};\nexport const unendorseComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/${nodeId}/comments/${commentId}/unendorse/${userId}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to unendorse comment');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('unendorse error:', error);\n    throw error;\n  }\n};\n\n// NEW: Report comment endpoint\nexport const unreportComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/${nodeId}/comments/${commentId}/unreport/${userId}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to unreport comment');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Report error:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["fetchComments","nodeId","userId","url","URL","searchParams","append","response","fetch","ok","Error","json","refreshComments","BASE_URL","createComment","content","proStatus","method","headers","body","JSON","stringify","errorData","message","error","console","endorseComment","commentId","reportComment","unendorseComment","unreportComment"],"sources":["/Users/yc/Documents/MainWebsiteTree/ActualWebsite/Algorithm+TopicSutff/algorithm-app/src/CodeNode/services/commentsAPI.js"],"sourcesContent":["// src/services/commentsAPI.js\n\nexport const fetchComments = async (nodeId, userId = null) => {\n  const url = new URL(`/api/nodes/${nodeId}/comments`);\n  if (userId) url.searchParams.append('userId', userId);\n  \n  const response = await fetch(url);\n  if (!response.ok) throw new Error('Network response was not ok');\n  return response.json();\n};\n\nexport const refreshComments = async (nodeId) => {\n  const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments`);\n  if (!response.ok) throw new Error('Failed to refresh comments');\n  return response.json();\n};\n\nexport const createComment = async (nodeId, content, proStatus) => {\n  try {\n    const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments`, {\n      method: 'POST',\n      headers: { \n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({content, proStatus } )\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'API request failed');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('API call error:', error);\n    throw error;\n  }\n};\n\nexport const endorseComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments/${commentId}/endorse/${userId}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to endorse comment');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Endorse error:', error);\n    throw error;\n  }\n};\n\n// NEW: Report comment endpoint\nexport const reportComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/nodes/${nodeId}/comments/${commentId}/report/${userId}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to report comment');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Report error:', error);\n    throw error;\n  }\n};\n\nexport const unendorseComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/${nodeId}/comments/${commentId}/unendorse/${userId}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to unendorse comment');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('unendorse error:', error);\n    throw error;\n  }\n};\n\n// NEW: Report comment endpoint\nexport const unreportComment = async (nodeId, commentId, userId) => {\n  try {\n    const response = await fetch(`${BASE_URL}/${nodeId}/comments/${commentId}/unreport/${userId}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to unreport comment');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Report error:', error);\n    throw error;\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}